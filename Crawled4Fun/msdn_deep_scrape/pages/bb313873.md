# Texture Fetching in HLSL (xvs_3_0, xps_3_0)

**Source:** http://msdn.microsoft.com/en-us/library/bb313873.aspx

The Wayback Machine - https://web.archive.org/web/20100423063105/http://msdn.microsoft.com:80/en-us/library/bb313873.aspx
XNA Game Studio 3.1
Texture Fetching in HLSL (xvs_3_0, xps_3_0)
Inline microcode assembly can be used to access the [extra parameters](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb313958.aspx) that are available when fetching texures. This is useful primarily for the **OffsetX** , **OffsetY** , and **OffsetZ** parameters. 
The following code demonstrates texture fetching in HLSL.
```
    struct vsout {
      float4 p : POSITION;
      float4 uv : TEXCOORD;
    };
    
    struct psin {
      float4 uv : TEXCOORD;
    };
    
    vsout TFetchVS( vsout input )
    {
      return input;
    }
    
    sampler2D s : register( s0 );
    
    float4 tex2DOffset( sampler2D ss, float2 uv, float2 offset )
    {
      float4 result;
      float offsetX = offset.x;
      float offsetY = offset.y;
     
      asm {
        tfetch2D result, uv, ss, OffsetX = offsetX,
        OffsetY = offsetY
      };
      
      return result;
    }

    float4 TFetchPS( psin input ) : COLOR
    {
      float4 sum = 0;
     
      for( int i = 0; i < 3; i++ )
      {
        for( int j = 0; j < 3; j++ )
        {
          sum += tex2DOffset( s, input.uv, float2( i - 1, j - 1 ) );
        }
      }
      
      return sum / 9.0;
    }
  
```

See Also
* * *
#### Concepts
[Inline Microcode Assembly in HLSL](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb313871.aspx)  
[Vertex Fetching in HLSL (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb313874.aspx)  
[Swizzling (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb313962.aspx)  

#### Reference
[Microcode Instructions (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb313961.aspx)  

* * *
  
[MSDN Library](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/ms123401.aspx)  
[Development Tools and Languages](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/aa187916.aspx)  
[XNA Game Studio](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/aa468128.aspx)  
[XNA Game Studio 3.1](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb200104.aspx)  
[Programming Guide](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb198548.aspx)  
[Hardware and Platforms](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb975657.aspx)  
[Xbox 360 Programming](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb417501.aspx)  
[Microcode (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb313877.aspx)  
[Texture Fetching in HLSL (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100423063105/http://msdn.microsoft.com/en-us/library/bb313873.aspx)
* * *
Tags: 
![](https://web.archive.org/web/20100423063105im_/http://i.msdn.microsoft.com/Global/Images/wiki.gif)
Community Content
