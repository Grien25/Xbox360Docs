# Swizzling (xvs_3_0, xps_3_0)

**Source:** http://msdn.microsoft.com/en-us/library/bb313962.aspx

The Wayback Machine - https://web.archive.org/web/20100429090724/http://msdn.microsoft.com:80/en-us/library/bb313962.aspx
XNA Game Studio 3.1
Swizzling (xvs_3_0, xps_3_0)
Swizzling is a way of specifying which inputs go to what channels and only applies to input registers. There are four different types of swizzling, based on the instruction type.
  * [vfetch Instructions](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313962.aspx#vfetch)
  * [tfetch Instructions](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313962.aspx#tfetch)
  * [Vector ALU Instructions](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313962.aspx#vector)
  * [Scalar ALU Instructions](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313962.aspx#scalar)


# vfetch Instructions
The one-component swizzle for **vfetch** instructions is always of the following form.
```
_src_.{x|y|z|w}
```

# tfetch Instructions
There are four **tfetch** instructions. The swizzling for these instructions is used to indicate the components of the source register to use for the texture lookup. Each instruction is of the following form.
```
tfetch _dest_, _src_, _fetchConst_
```

## tfetch1D
The [tfetch1D](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313956.aspx) instruction performs a 1D texture lookup. The _src_ register must have a one-component swizzle. For example, _src_ might be r4.x. The swizzle (".x" in this case) indicates that the texture coordinate comes from the x-component of the r4 register.
The one-component swizzle for the [tfetch1D](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313956.aspx) instruction is always of the following form.
```
_src_.{x|y|z|w}
```

## tfetch2D
The [tfetch2D](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313957.aspx) instruction performs a 2D texture lookup. The _src_ register must have a two-component swizzle. For example, _src_ might be r4.wx. The swizzle (".wx" in this case) indicates that the w- and x-components are used to lookup the U and V texture coordinates, respectively.
The two-component swizzle for the [tfetch2D](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313957.aspx) instruction is always of the following form.
```
_src_.{x|y|z|w}{x|y|z|w}
```

## tfetch3D and tfetchCube
The [tfetch3D](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313958.aspx) instruction performs a 3D texture lookup. The [tfetchCube](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313959.aspx) instruction performs a cube texture lookup. The _src_ register must have a three-component swizzle. For example, _src_ might be r4.wxz. The swizzle (".wxz" in this case) indicates that the w-, x- and z-components are used to lookup the u, v and w texture coordinates, respectively.
The three-component swizzle for these two instructions is always of the following form.
```
_src_.{x|y|z|w}{x|y|z|w}{x|y|z|w}
```

# Vector ALU Instructions
Every [vector ALU instruction](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313916.aspx) may make use of an optional four-component swizzle. This swizzle allows individual components of the source register to temporarily take on the value of any of the four components of the same register, before that register is read for computation. The contents of the source register are not modified by the swizzle.
The four-component swizzle for the vector ALU instructions is always of the following form.
```
_src_[.{x|y|z|w}[x|y|z|w][x|y|z|w][x|y|z|w]]
```

The first optional block specifies the x-component, the second optional block specifies the y-component, and so on. For example, the .zxxy swizzle means:
  * The x-component will temporarily take on the value of the z-component.
  * The y-component will temporarily take on the value of the x-component.
  * The z-component will temporarily take on the value of the x-component.
  * The w-component will temporarily take on the value of the y-component.


Components can appear in any order. If fewer than four components are specified, the last component is repeated. For example, .xy is the same as .xyyy, .wzx is the same as .wzxx, and .z is the same as .zzzz. If no components are specified, no swizzling occurs. No swizzling is the same as .xyzw.
# Scalar ALU Instructions
Every [scalar ALU instruction](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313879.aspx) requires either a one- or two-component swizzle that indicates the components to use for the scalar operation. Almost all scalar ALU instructions operate on a single component of the source register. These scalar instructions make use of a one-component swizzle. Consider the following example.
```
cos r4, r3.y
```

The ".y" swizzle on the source register tells the scalar instruction to use compute the cosine of the y-component of r3.
The one-component swizzle for the scalar ALU instructions is always of the following form.
```
_src_.{x|y|z|w}
```

There are six scalar ALU instructions that operate on two components of their source register.
  * [adds](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313880.aspx)
  * [maxs](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313891.aspx)
  * [mins](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313892.aspx)
  * [muls](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313896.aspx)
  * [muls_prev2](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313898.aspx)
  * [subs](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313913.aspx)


These six instructions require a two-component swizzle that indicates the components to use. Consider the following example.
```
subs r4, r3.zx
```

The ".zx" swizzle on the source register tells the scalar instruction to compute the difference of r3.z and r3.x.
The two-component swizzle for the scalar ALU instructions is always of the following form.
```
_src_.{x|y|z|w}{x|y|z|w}
```

The first mandatory component indicates the first operand for the instruction. The second mandatory component indicates the second operand for the instruction.
See Also
* * *
#### Concepts
[Inline Microcode Assembly in HLSL](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313871.aspx)  
[Vertex Fetching in HLSL (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313874.aspx)  
[Texture Fetching in HLSL (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313873.aspx)  

#### Reference
[Microcode Instructions (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313961.aspx)  

* * *
  
[MSDN Library](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/ms123401.aspx)  
[Development Tools and Languages](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/aa187916.aspx)  
[XNA Game Studio](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/aa468128.aspx)  
[XNA Game Studio 3.1](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb200104.aspx)  
[Programming Guide](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb198548.aspx)  
[Hardware and Platforms](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb975657.aspx)  
[Xbox 360 Programming](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb417501.aspx)  
[Microcode (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313877.aspx)  
[Swizzling (xvs_3_0, xps_3_0)](https://web.archive.org/web/20100429090724/http://msdn.microsoft.com/en-us/library/bb313962.aspx)
* * *
Tags: 
![](https://web.archive.org/web/20100429090724im_/http://i.msdn.microsoft.com/Global/Images/wiki.gif)
Community Content
